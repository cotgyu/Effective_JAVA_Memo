이펙티브 자바
-------------

---

### 9장 일반적인 프로그래밍 원칙

-	자바 언어의 핵심요소에 집중한다.
-	지역변수, 제어구조, 라이브러리, 데이터 타입, 리플렉션, 네이티브 메서드, 최적화, 명명 규칙에 대해 살펴본다.

#### 아이템 57 지역변수의 범위를 최소화하라

-	아이템15 - '클래스와 멤버의 접근 권한을 최소화하라' 와 취지가 비슷하다.

-	지역변수의 유효범위를 최소로 줄이면 코드 가독성과 유지보수성이 높아지고 오류 가능성은 낮아진다.

-	지역변수의 범위를 줄이는 가장 강력한 기법은 역시 '가장 처음 쓰일 때 선언하기'다.

	-	미리 선언해두면 코드가 어수선해지고, 실제로 사용하는 시점에 초깃값이 기억나지 않을 수 있음

-	거의 모든 지역변수는 선언과 동시에 초기화해야 한다.

	-	초기화에 필요한 정보가 필요하지 않다면 선언을 미뤄야 함.
	-	변수를 초기화하는 표현식에서 검사 예외를 던질 가능성이 있다면 try 블록 안에서 초기화해야 한다.

-	반복문은 독특한 방식으로 변수 범위를 최소화해준다.

	-	반복문에서는 반복 변수의 범위가 반복문의 몸체, 그리고 for 키워드와 몸체 사이의 괄호 안으로 제한된다.
	-	반복 변수의 값을 반복문이 종료된 뒤에도 써야 하는 상황이 아니라면 while 문보다 for문을 쓰는 것이 낫다.

	```java
	// 컬렉션이나 배열을 순회하는 권장 관용구
	for(Element e : c){
	    ...
	}


	// 반복자가 필요할 때의 관용구
	for(Iterator<Element> i = c.iterator(); i.hasNext(); ){
	    Element e = i.next();
	    ...
	}
	```

	-	while 문의 경우 오타로 인한 실수가 발생할 수 있음.
	-	for 문은 이런 문제를 방지할 수 있다. (변수 유효범위로 같은 변수를 써도 영향을 주지 않음)

-	메서드를 작게 유지하고 한 가지 기능에 집중해야 한다.

	-	한 메서드에서 여러가지 기능을 처리한다면 한 기능과만 관련된 지역변수라도 다른 기능을 수행하는 코드에서 접근할 수 있을 것임.

#### 아이템 58 전통적인 for문 보다는 for-each문을 사용하라

-	반복자와 인덱스 변수는 코드를 지저분하게 할 뿐 우리에게 진짜 필요한 건 원소들 뿐이다.

	-	요소 종류가 늘어나면 오류가 생길 가능성이 높아진다.

		```java
		// 컬렉션 순회
		for(Iterator<Element> i = c.iterator(); i.hasNext(); ){
		    Element e = i.next();
		    ...
		}


		// 배열 순회
		for (int i = 0; i < a.length; i++){
		    ...
		}
		```

-	for-each문을 사용하면 해결된다. (enhanced for statement)

	-	반복자와 인덱스 변수를 사용하지 않으니 코드가 깔끔해지고 오류가 날 일도 없다.
	-	하나의 관용구로 컬레션과 배열 모두처리할 수 있어서 어떤 컨테이너를 다루는지 신경 쓰지 않아도 된다.

		```java
		for (Element e : element){
		    ...
		}
		```

-	for-each문을 사용할 수 없는 상황 (일반적인 for문을 사용할 것)

	-	파괴적인 필터링 : 컬렉션을 순회하면서 선택된 원소를 제거해야 한다면 반복자의 remove 메서드를 호출해야한다. (자바8부터는 Collection의 removeIf 메서드를 사용해 컬렉션을 명시적으로 순회하는 일을 피할 수 있다.)
	-	변경 : 리스트나 배열을 순회하면서 그 원소의 값 일부 혹은 전체를 교체해야 한다면 리스트의 반복자나 배열의 인덱스를 사용해야 한다.
	-	병렬 반복 : 여러 컬렉션을 병렬로 순회해야 한다면 각각의 반복자와 인덱스 변수를 사용해 엄격하고 명시적으로 제어해야 한다.

-	for-each문은 컬렉션과 배열은 물론 Iterable 인터페이스를 구현한 객체라면 순회할 수 있다.

	-	Iterable 을 처음부터 구현하기는 까다롭지만, 원소들의 묶음을 표현하는 타입을 작성해야 한다면 Iterable을 구현하는 쪽으로 고민하자

-	책에 있는 핵심 정리

	-	전통적인 for 문과 비교했을 때 for-each문은 명료하고, 유연하고, 버그를 예방해준다.
	-	성능저하도 없음
	-	가능한 모든 곳에서 for문이 아닌 for-each문을 사용할 것!!
